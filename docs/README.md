# å¼€å‘æ–‡æ¡£

æ¬¢è¿ä½¿ç”¨ Electron Vue å¯åŠ¨æ¨¡æ¿ï¼æœ¬æ–‡æ¡£å°†å¸®åŠ©ä½ å¿«é€Ÿä¸Šæ‰‹é¡¹ç›®å¼€å‘ã€‚

## ğŸ“‹ æ–‡æ¡£å¯¼èˆª

### ğŸš€ å¿«é€Ÿå¼€å§‹
- [é¡¹ç›®æ ¹ç›®å½• README](../README.md) - é¡¹ç›®æ¦‚è§ˆå’Œå¿«é€Ÿå¯åŠ¨æŒ‡å—

### ğŸ—ï¸ æ ¸å¿ƒæŠ€æœ¯æŒ‡å—
1. **[tRPC å’Œ Prisma é›†æˆæŒ‡å—](./trpc-prisma-guide.md)**
   - æŠ€æœ¯æ ˆæ¶æ„æ¦‚è§ˆ
   - æ•°æ®æµç¨‹å’Œç±»å‹å®‰å…¨
   - æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

2. **[æ•°æ®åº“æ¨¡å‹ç®¡ç†](./database-models.md)**
   - Prisma Schema è¯­æ³•
   - æ•°æ®åº“æ¨¡å‹è®¾è®¡
   - è¿ç§»å’Œéƒ¨ç½²

3. **[API æ¥å£å¼€å‘](./api-development.md)**
   - tRPC è·¯ç”±å¼€å‘
   - è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†
   - å‰ç«¯é›†æˆä½¿ç”¨

## ğŸ”„ å¼€å‘å·¥ä½œæµ

### å…¸å‹çš„åŠŸèƒ½å¼€å‘æµç¨‹ï¼š

1. **è®¾è®¡æ•°æ®æ¨¡å‹** â†’ [æ•°æ®åº“æ¨¡å‹ç®¡ç†](./database-models.md)
   ```bash
   # ä¿®æ”¹ prisma/schema.prisma
   # æ¨é€å˜æ›´åˆ°æ•°æ®åº“
   yarn prisma db push
   yarn prisma generate
   ```

2. **å®ç°æ•°æ®åº“æ“ä½œ** â†’ [API æ¥å£å¼€å‘](./api-development.md#ç¬¬äºŒæ­¥åœ¨æ•°æ®åº“æœåŠ¡ä¸­æ·»åŠ æ–¹æ³•)
   ```typescript
   // åœ¨ src/main/database.ts ä¸­æ·»åŠ æ–¹æ³•
   async createModel(data) { /* ... */ }
   ```

3. **å®šä¹‰ API è·¯ç”±** â†’ [API æ¥å£å¼€å‘](./api-development.md#ç¬¬ä¸‰æ­¥å®šä¹‰-trpc-è·¯ç”±)
   ```typescript
   // åœ¨ src/main/trpc.ts ä¸­æ·»åŠ è·¯ç”±
   export const appRouter = router({
     models: router({ /* ... */ })
   });
   ```

4. **å‰ç«¯é›†æˆä½¿ç”¨** â†’ [API æ¥å£å¼€å‘](./api-development.md#ç¬¬å››æ­¥åœ¨å‰ç«¯ä½¿ç”¨æ¥å£)
   ```vue
   <!-- åœ¨ Vue ç»„ä»¶ä¸­è°ƒç”¨ API -->
   <script setup>
   const data = await window.electronAPI.trpc.models.getAll.query();
   </script>
   ```

## ğŸ› ï¸ å¼€å‘å·¥å…·

### æ•°æ®åº“ç®¡ç†
```bash
# æ‰“å¼€ Prisma Studioï¼ˆå¯è§†åŒ–æ•°æ®åº“ç®¡ç†ï¼‰
yarn prisma studio
```

### ç±»å‹ç”Ÿæˆ
```bash
# é‡æ–°ç”Ÿæˆ Prisma å®¢æˆ·ç«¯å’Œç±»å‹
yarn prisma generate
```

### å¼€å‘æœåŠ¡å™¨
```bash
# å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
yarn dev
```

## ğŸ“ é¡¹ç›®ç»“æ„é€Ÿè§ˆ

```
src/
â”œâ”€â”€ main/                 # Electron ä¸»è¿›ç¨‹
â”‚   â”œâ”€â”€ database.ts      # æ•°æ®åº“æœåŠ¡ (Prisma)
â”‚   â”œâ”€â”€ trpc.ts         # API è·¯ç”±å®šä¹‰ (tRPC)
â”‚   â”œâ”€â”€ main.ts         # ä¸»è¿›ç¨‹å…¥å£
â”‚   â””â”€â”€ preload.ts      # é¢„åŠ è½½è„šæœ¬ (IPC æ¡¥æ¥)
â””â”€â”€ renderer/            # Vue 3 å‰ç«¯
    â”œâ”€â”€ lib/trpc.ts     # tRPC å®¢æˆ·ç«¯é…ç½®
    â”œâ”€â”€ components/     # Vue ç»„ä»¶
    â””â”€â”€ assets/         # é™æ€èµ„æº

prisma/
â”œâ”€â”€ schema.prisma       # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”œâ”€â”€ dev.db             # SQLite å¼€å‘æ•°æ®åº“
â””â”€â”€ migrations/        # æ•°æ®åº“è¿ç§»æ–‡ä»¶

docs/                   # å¼€å‘æ–‡æ¡£
```

## ğŸ¯ å¸¸è§å¼€å‘åœºæ™¯

### æ·»åŠ æ–°çš„æ•°æ®æ¨¡å‹
1. åœ¨ `prisma/schema.prisma` ä¸­å®šä¹‰æ¨¡å‹
2. è¿è¡Œ `yarn prisma db push` åº”ç”¨å˜æ›´
3. åœ¨ `src/main/database.ts` ä¸­æ·»åŠ æ•°æ®æ“ä½œæ–¹æ³•
4. åœ¨ `src/main/trpc.ts` ä¸­æ·»åŠ  API è·¯ç”±
5. åœ¨å‰ç«¯ç»„ä»¶ä¸­è°ƒç”¨ API

### ä¿®æ”¹ç°æœ‰æ¥å£
1. æ›´æ–° `src/main/trpc.ts` ä¸­çš„éªŒè¯ schema
2. ä¿®æ”¹å¯¹åº”çš„æ•°æ®åº“æ“ä½œæ–¹æ³•
3. æ›´æ–°å‰ç«¯è°ƒç”¨ä»£ç ï¼ˆTypeScript ä¼šæä¾›ç±»å‹æ£€æŸ¥ï¼‰

### æ•°æ®åº“è¿ç§»
1. ä¿®æ”¹ `prisma/schema.prisma`
2. è¿è¡Œ `yarn prisma migrate dev --name migration_name`
3. æ›´æ–°ç›¸å…³çš„ä»£ç 

## ğŸ’¡ æç¤ºå’ŒæŠ€å·§

- **ç±»å‹å®‰å…¨**ï¼štRPC æä¾›ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨ï¼Œå……åˆ†åˆ©ç”¨ TypeScript çš„ç±»å‹æ£€æŸ¥
- **çƒ­é‡è½½**ï¼šå¼€å‘ç¯å¢ƒæ”¯æŒå‰ç«¯å’Œåç«¯ä»£ç çš„çƒ­é‡è½½
- **æ•°æ®éªŒè¯**ï¼šä½¿ç”¨ Zod è¿›è¡Œè¾“å…¥éªŒè¯ï¼Œç¡®ä¿æ•°æ®å®‰å…¨
- **é”™è¯¯å¤„ç†**ï¼štRPC æä¾›äº†å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶
- **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨ Prisma çš„ select å’Œ include ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢

## ğŸ¤ è´¡çŒ®æŒ‡å—

å¦‚æœä½ å‘ç°æ–‡æ¡£æœ‰ä¸å‡†ç¡®æˆ–å¯ä»¥æ”¹è¿›çš„åœ°æ–¹ï¼Œæ¬¢è¿æäº¤ PR æˆ–åˆ›å»º Issueï¼

---

**å¼€å§‹ä½ çš„å¼€å‘ä¹‹æ—…å§ï¼** ğŸš€
